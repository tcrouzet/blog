<!DOCTYPE html><html lang=fr><head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0"><style>::before,::after{box-sizing:border-box}html{background-color:#fffbd4;color:black;font-family:Monospace;-webkit-text-size-adjust:100%;tab-size:4;font-size:100%;box-sizing:border-box;text-rendering:optimizeLegibility}body{max-width:90ch;margin:0 auto;padding:0 1rem}button,input,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}button,[type='button'],[type='submit']{appearance:button}:root{--font-size:1.3rem;--line-height:calc(1ex/0.32);--font-size-small:1rem;--font-size-title:calc(var(--font-size)*2.4);--font-size-h3:1.7rem;--top-height:3rem}button,input,select,textarea,label{font-family:var(--font-headings)}h1,h2,h3,h6,nav,header{font-family:monospace;font-weight:bold}h4{font-weight:bold}button,a{cursor:pointer}a,a:visited,a:active,a:hover{color:inherit;text-decoration:none;border:0}footer{margin:2rem 0 4rem 0}header{display:flex;align-items:center;height:var(--top-height);gap:1rem}header>a[aria-label="Accueil"]{font-size:1.35rem}header>a[aria-label="Menu"]{margin-left:auto}main{margin-top:1rem}article header{display:contents}article header figure{width:100%;margin:0;padding:0}article header figure img{width:100%;height:60vh;object-fit:cover}.poster-book{object-fit:contain;object-position:left center}main[itemtype$="CollectionPage"] article img.poster-img-book-small{width:100%;height:auto;aspect-ratio:3/4.5;border:1pt solid}h1{font-size:var(--font-size-title);line-height:1.1;margin:1rem auto}nav{margin:2rem 0;font-weight:normal}nav a.prev{margin-right:.5rem}nav a.next{margin-left:.5rem}p,li{font-size:var(--font-size);line-height:var(--line-height);margin-top:1rem;overflow-wrap:break-word}section[itemprop="articleBody"]>p:first-child::first-letter {font-family:var(--font-headings);font-weight:700;font-size:large}pre{margin:1rem auto 0}ul,ol{margin:0 auto}ul{list-style-type:none;padding-left:2rem;padding-right:1rem}ul li{position:relative;padding-left:1.5em}ul li::before{content:"•";font-size:2rem;position:absolute;left:-.5rem}ol{list-style-type:decimal}li p{margin:0;padding:0}article section a{background:linear-gradient(to bottom,black 95%,black 100%);background-repeat:no-repeat;background-size:100% 1px;background-position:0 calc(100% - 0.1ex)}blockquote{margin:1rem 0;font-style:italic}blockquote p{margin:0 2em;font-style:italic}article section figure{display:block;margin:1.6rem auto;text-align:center;width:100%}article section figure img{border:1px solid #ccc;width:100%;height:auto}figcaption{font-weight:normal;text-align:right;padding-right:0;font-size:.6em}figcaption.legend-center{text-align:right;padding:0}article section h2,article section h3,article section h4{margin:1.6rem auto 0;line-height:var(--line-height)}article section h2,article section h3{font-size:var(--font-size-h3)}article section h4{font-size:smaller}article section h5{text-align:right;font-size:var(--font-size)}article section hr{width:10ch;margin:2rem auto;border:1px solid}article section iframe{padding:1rem 0;display:block;width:100%}code{white-space:pre-wrap;display:block;padding:1rem;border-radius:4px;font-family:'Monaco','Consolas',monospace;font-size:.8em;overflow-x:auto}article footer{margin:1rem 0}main[itemtype$="CollectionPage"]{text-align:center;display:flex;flex-wrap:wrap;justify-content:space-between;margin:var(--top-height) auto 0;max-width:90rem}main[itemtype$="CollectionPage"] nav *{margin:0}main[itemtype$="CollectionPage"] nav{display:flex;align-items:baseline;gap:1.5rem;width:100%;flex-wrap:wrap;margin:0 0 1rem}main[itemtype$="CollectionPage"] article{display:inline-block;position:relative;width:100%;margin-bottom:1.6rem;cursor:pointer;text-align:left}main[itemtype$="CollectionPage"] data{font-weight:bold;text-align:center;background-color:black;color:#fffbd4;min-width:3rem;margin-right:.5rem;display:inline-block}main[itemtype$="CollectionPage"] h2{font-size:var(--font-size);font-weight:normal;margin:0}main[itemtype$="CollectionPage"] h3{display:inline;font-size:1.2rem}article[itemtype$="Book"]>section[itemprop="articleBody"]>h2:first-of-type{margin:0 auto;font-size:var(--font-size-h3);font-weight:normal}h6{font-size:var(--font-size);margin:.5rem auto 0}.book_genre{color:var(--color-medium);font-variant:small-caps}main[itemtype$="AboutPage"] section h2{margin:2rem 0 .5rem}main[itemtype$="AboutPage"] section h3{font-weight:normal;margin:0}footer section{display:flex;width:100%;margin:2rem auto;gap:1rem;flex-wrap:wrap;align-items:center}footer section button,footer section a,footer section label{display:inline;width:auto;text-align:center;background:transparent;border:0;cursor:pointer}div.comments{display:none;width:100%;margin:0}.com-toggle:checked ~ div.comments{display:block !important}div.comments form{margin-top:1rem}div.comments form input[type="email"],div.comments form input[type="text"]{width:50%;box-sizing:border-box}div.comments form textarea{width:100%;box-sizing:border-box}div.comments form input[type="radio"]{display:inline;margin-right:.5rem}div.comments form button,[type='button'],[type='submit']{display:block;color:#fffbd4;background-color:black}div.comments form fieldset{border:0;margin:0;padding:0}div.comments form legend{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}div.comments h5{text-align:left;font-weight:bold;font-family:var(--font-headings)}footer>div:last-of-type{font-family:var(--font-headings);display:flex;justify-content:center;width:100%;margin-bottom:2rem;gap:1rem}footer>div:last-of-type a{display:inline-flex;align-items:center;gap:8px;background-color:#e30613;color:var(--color-contrast);border-radius:30px;padding:10px 18px;font-size:1rem;border:0}.link-background{background:#70f !important}#menu{margin:var(--top-height) 0 0 0;font-family:var(--font-headings)}#menu hr{margin:1.5rem 0;border:1px solid}#menu h1{font-size:var(--font-size);text-transform:uppercase;font-weight:normal;margin:0 0 .5rem 0;padding:0;text-align:left}#menu ul{margin:0;padding:0;max-width:100%}#menu ul li{font-family:var(--font-headings);display:inline-block;margin:0 1rem 0 0;padding:0}#menu ul li::before{content:none}#search{font-family:var(--font-headings);margin-top:var(--top-height);display:flex;flex-direction:column;justify-content:center;align-items:center;height:60vh;text-align:center}#search ul li{display:inline-block;margin:0 1rem 0 0;padding:0}#search ul li::before{content:none}@media(max-width:40ch){:root{--font-size:1rem}label{margin-right:.5em}main[itemtype$="CollectionPage"] nav{gap:.5rem;justify-content:flex-start}}@media(max-width:70ch){article header figure img{height:40vh}h1{font-size:calc(var(--font-size)*2)}main[itemtype$="CollectionPage"] nav h1{padding:0;font-size:1.2rem}#menu div{display:block}#menu ul li{display:block}#menu div a{width:100%;min-height:15vh;margin-bottom:1em}main[itemtype$="CollectionPage"] nav{gap:.5rem;font-size:smaller}}</style><title>Comment sécuriser et optimiser son blog</title><link rel="shortcut icon" href=/favicon.ico><link rel=alternate type=application/rss+xml title="Thierry Crouzet" href=/feeds/feed.xml><meta name=robots content="index, follow"><meta name=google-site-verification content=EmtKKbIk2-Tz3Nyp7hJRPjcMbgf68Vwq6yJYs1hvsqA><meta name=msvalidate.01 content=805E5BFBA891A41968028F5C97A228D3><meta name=description content="Quand je dis qu’un blog n’a aucune pérennité, c’est en connaissance de cause. Je viens de passer plus d’un mois à me battre avec le mien."><meta name=author content="Thierry Crouzet"><link href=https://static.tcrouzet.com/2013/01/30/comment-securiser-et-optimiser-son-blog/ rel=canonical><link rel=me href=https://mamot.fr/@tcrouzet><meta name=fediverse:creator content=@tcrouzet@mamot.fr><meta property=og:title content="Comment sécuriser et optimiser son blog"><meta property=og:description content="Quand je dis qu’un blog n’a aucune pérennité, c’est en connaissance de cause. Je viens de passer plus d’un mois à me battre avec le mien."><meta content=https://static.tcrouzet.com/2013/01/30/comment-securiser-et-optimiser-son-blog/ property=og:url><meta property=og:locale content=fr_FR><meta property=og:type content=article><meta property=og:site_name content="Thierry Crouzet"><meta property=article:author content="Thierry Crouzet"><meta property=article:published_time content=2013-01-30T13:42:00+01:00><meta property=article:modified_time content=2024-04-30T08:24:30+02:00><meta property=og:image content=https://static.tcrouzet.com/images_tc/2013/01/opt_p3.png><meta property=og:image:width content=867><meta property=og:image:height content=534><meta property=og:image:alt content="Comment sécuriser et optimiser son blog"><meta name=twitter:card content=summary_large_image><meta name=twitter:image content=https://static.tcrouzet.com/images_tc/2013/01/opt_p3.png><meta name=twitter:title content="Comment sécuriser et optimiser son blog"><meta name=twitter:description content="Quand je dis qu’un blog n’a aucune pérennité, c’est en connaissance de cause. Je viens de passer plus d’un mois à me battre avec le mien."></head><body><header><a aria-label=Accueil href=/ title=Accueil>Thierry CROUZET</a><a href=/menu/ aria-label=Menu>Menu</a><a href=/page/abonnement-par-mail/ aria-label=Newsletter>Newsletter</a><a href=/search/ aria-label=Recherche>Recherche</a><a href=/page/me-soutenir/ aria-label=Soutien>€</a></header><main><article itemscope itemtype=https://schema.org/BlogPosting><header><figure><img width=867 height=534 src=/images_tc/2013/01/opt_p3.png alt="Comment sécuriser et optimiser son blog" itemprop=image fetchpriority=high decoding=async srcset="/images_tc/2013/01/opt_p3.png 867w" sizes="(min-width: 90ch) 90ch, 100vw"><figcaption>Comment sécuriser et optimiser son blog</figcaption></figure><h1 itemprop=headline>Comment sécuriser et optimiser son blog</h1><nav><a href=/2013/01/27/les-saisons-de-la-creation/ class=prev rel=prev>&lt; </a><a href=/tag//blog itemprop=articleSection>Digressions 5</a> - <a href=/2013/ ><time datetime=2013-01-30T13:42:00 title="Publié à 13:42">30 January 2013</time></a><a href=/2013/05/12/bloguer-nest-pas-tenir-un-journal/ class=next rel=next> &gt;</a></nav></header><section itemprop=articleBody><p>Quand je dis qu’<a href=/2013/1/le-blog-une-pratique-depassee>un blog n’a aucune pérennité</a>, c’est en connaissance de cause. Je viens de passer plus d’un mois à me battre avec le mien.</p><p>Changement de serveur dédié, lutte incessante contre les hackers qui veulent en prendre le contrôle, performance lamentable et temps de chargement prohibitif. Leçon : « Si tu ne suis pas l’évolution technologique, tu crèves. » Cela est d’autant plus vrai quand on se veut indépendant, donc forcé de maintenir soit même son architecture. Conséquence : « Un blog indépendant ne survit que tant que quelqu’un l’administre. À tout moment, sont contenu peut s’évanouir. Gênant pour un auteur qui considère son blog comme son œuvre. »</p><p>Quand je vois que le blog de Narvic a quitté la blogosphère je m’en attriste. Cette fois ce n’était pas par négligence, mais par une volonté de sa part, par son droit d’auteur, mais combien d’autres pépites s’effacent-elles peu à peu ? Voilà autant de raisons de me faire aimer le format epub et <a href=http://wordpress.org/extend/plugins/wp2epub/ rel="noopener noreferrer">mon plugin pour générer des ebooks à partir de mon blog</a>. N’empêche, je n’ai aucune envie d’abandonner mon vieux navire et j’ai bataillé pour le remettre sur pied. J’ai tiré quelques enseignements que je partage avec vous.</p><h2>Évaluation des performances</h2><p>La bande passante augmente, mais la taille des pages augmente tout aussi vite avec la profusion des JavaScript et plugins. Un temps de chargement en dessous de 2 secondes reste la règle en ergonomie (je ne l’ai pas atteint, faute de sacrifier photos et plugins lourds en javaScript).</p><p>Avant de tout casser, regardez où vous en êtes avec <a href=http://developer.yahoo.com/yslow/ rel="noopener noreferrer">Yslow</a>, un plugin pour Firefox et Chrome, ou depuis le site <a href=http://gtmetrix.com rel="noopener noreferrer">GTmetrix</a>. Objectif : un indice Yslow supérieur à 80. Les deux outils doivent être utilisés concurremment. Ils proposent tous les deux des conseils d’optimisation (j’avoue que je me suis arrêté en chemin).</p><p>Quand j’ai commencé mon travail, mon indice était à 40. Il est maintenant sur toutes mes pages au-dessus de 80. Ma page d’accueil est à 95.</p><figure><img alt=gtmetrix class=small decoding=async height=719 loading=lazy sizes="(min-width: 90ch) 90ch, 100vw" src=/images_tc/2013/01/opt_gtmetrix.png srcset="/images_tc/2013/01/opt_gtmetrix.png 722w" width=722><figcaption class="legend legend-center">gtmetrix</figcaption></figure><h2>En finir avec les hackers et plus</h2><p>Fatigué de configurer mon firewall sur Linux. De traquer les IP indésirables, de les bannir. J’ai fini par m’inscrire gratuitement sur <a href=www.cloudflare.com>Cloudflare</a>. Ce service est tout simplement <strong>génial</strong>, indispensable. Et je me demande pourquoi j’ai autant attendu avant de me simplifier la vie.</p><figure><img alt=Cloudflare decoding=async height=434 loading=lazy sizes="(min-width: 90ch) 90ch, 100vw" src=/images_tc/2013/01/opt_cloudware.png srcset="/images_tc/2013/01/opt_cloudware.png 1052w" width=1052><figcaption class="legend legend-center">Cloudflare</figcaption></figure><p>Cloudflare est en même temps…</p><ol><li><p>Un firewall qui fait la police et que vous pouvez configurer dynamiquement.</p></li><li><p>Un CDN (<em>Content Delivery Network</em>). Il stocke toutes vos données statiques dans son cache et peut vous maintenir en ligne même quand votre serveur tombe.</p></li><li><p>Un optimisateur. Il compresse les fichiers, charge les Javascripts en asynchrone et offre d’autres options de fine tunning comme l’ajout automatique des tracking Google Analytics.</p></li></ol><p>Cloudflare réussit ce tour de force en interceptant votre trafic. Comment ? Il remplace votre serveur DNS. Pour l’activer, il vous suffit chez votre hébergeur de domaine d’indiquer les DNS Cloudflare à la place des anciens. C’est terminé. En moins de 24 heures, votre blog se transforme en Ferrari.</p><h2>La recommandation sociale</h2><p>J’ai fini par jeter tous les plug-ins qui ajoutent des boutons et par tout coder en dur en copiant-collant les script proposer par les réseaux. Je ne vois pas pourquoi on devrait supporter des usines à gaz.</p><h2>Le problème WordPress</h2><p>Jusqu’à ce point, les conseils étaient valables pour toutes les plateformes. Je me suis ensuite attaqué à WordPress.</p><p><strong><em>Tester les plugins</em></strong> Certains mangent littéralement votre bande passante et la puissance de calcul du serveur. Pour les évaluer, il existe un autre plugin, <a href=http://wordpress.org/extend/plugins/p3-profiler/ rel="noopener noreferrer">P3 - Plugin Performance Profiler</a>. Quand j’ai commencé l’optimisation, rien que chargement des plugins exigeait près de 3 secondes. Je suis tombé à 0,5 seconde. J’ai tout simplement banni ceux qui étaient trop gourmands.</p><figure><img alt="P3 plugin" class=small decoding=async height=534 loading=lazy sizes="(min-width: 90ch) 90ch, 100vw" src=/images_tc/2013/01/opt_p3.png srcset="/images_tc/2013/01/opt_p3.png 867w" width=867><figcaption class="legend legend-center">P3 plugin</figcaption></figure><p>Inutile de recalculer les pages qui ne changent pas. Un cache s’impose. J’ai installé le plugin CloudFlare qui sert essentiellement en mode développement en conjonction avec <a href=http://wordpress.org/extend/plugins/w3-total-cache/ rel="noopener noreferrer">W3 Total Cache</a>. J’ai aussi testé le classique <a href=http://wordpress.org/extend/plugins/wp-super-cache/ rel="noopener noreferrer">WP Super Cache</a> qui me donne les mêmes résultats. J’ai enfin ajouté <a href=http://wordpress.org/extend/plugins/wp-gravatar-mini-cache/ rel="noopener noreferrer">un minuscule plugin qui met en cache les gravatar</a>.</p><p><strong><em>Jetpack : le dilemme</em></strong><a href=http://wordpress.org/extend/plugins/jetpack/ rel="noopener noreferrer">C’est le plugin à tout faire</a>, il est très lourd. Il ajoute pas moins de 100 Ko de script et de CSS. J’ai longtemps hésité à le virer, mais je l’ai gardé pour l’abonnement aux commentaires et deux ou trois autres fonctions, j’ai désactivé toutes les autres. J’attends de trouver mieux car 100 Ko c’est de la gabegie.</p><p><strong><em>Sécurité</em></strong><a href=http://wordpress.org/extend/plugins/wordfence/ rel="noopener noreferrer">Wordfence</a> est l’anti-virus de WordPress. La première fois que je l’ai lancé, il a découvert des dizaines de chevaux de Troie. Depuis il veille au grain et intercepte de nombreuses tentatives de connexion illicites.</p><h2>Bilan</h2><p>Avec des pages souvent supérieure à 300 Ko, mon blog reste surchargé. Je n’ai pas voulu virer la photo du moment, ni pondre un bout de code pour l’optimiser… J’en ai fini avec cette expérience d’immersion dans le code. Je sens qu’elle réactive des rouages de mon cerveau qui sinon se rouilleraient trop vite. Je m’y applique une ou deux fois par an. C’est une sorte d’hygiène pour informaticien retraité. Bien sûr si vous avez d’autres tuyaux, je suis preneur.</p><p><em>PS : J’ai nécessairement oublié des dizaines de détails, notamment tout ce qui concerne la configuration serveur, mais j’ai résumé l’essentiel.</em></p></section><footer><section><input type=checkbox id=com-62 class=com-toggle hidden><label for=com-62 title=Commenter>Commenter</label><a href=https://raw.githubusercontent.com/tcrouzet/md/refs/heads/main/2013/01/comment-securiser-et-optimiser-son-blog.md download title=Télécharger>Télécharger</a><a href=/page/lectures/ title="Sites amis">Sites amis</a><div class=comments><h5>Lionel @ 2013-01-31 04:00:48</h5><p>Impossible de quitter le thème mobile; pas agréable du tout sur un écran de taille «humaniste»… ;)</p><p>Tu pourrais désactiver le <em>plugin</em> WP-Touch et prendre un thème <em>responsive</em> simple.</p><h5>Stan @ 2013-02-01 21:43:26</h5><p>Merci pour cloudflare !! Testé et approuvé :-)</p><h5>Thierry Crouzet @ 2013-02-02 20:35:16</h5><p>@Lionel C’est W3 Total Cache qui bloque WP Touch... ça marche mieux avec Super Cache... je vais tester</p><form method=POST action=https://formspree.io/f/mgebvkwn><input type=hidden value=/2013/01/30/comment-securiser-et-optimiser-son-blog/ name=postUrl><input type=hidden name=postTitle value="Comment sécuriser et optimiser son blog"><input aria-label=Email autocomplete=on name=email type=email placeholder="Votre email" required><input aria-label=Nom autocomplete=on name=nom type=text placeholder="Votre nom" required><textarea aria-label=Message name=message placeholder="Votre commentaire" required></textarea><fieldset><legend>Visibilité</legend><label><input type=radio name=messageType value=private checked> Privé </label></fieldset><button type=submit>Envoyer</button></form></div></section></footer></article></main><footer> (cc) <a href=/page/informations/ >Thierry Crouzet</a></footer></body></html>