<!DOCTYPE html><html lang=fr xmlns=http://www.w3.org/1999/xhtml xmlns:og=http://opengraphprotocol.org/schema/ xmlns:fb=http://www.facebook.com/2008/fbml><head profile=http://gmpg.org/xfn/11><meta http-equiv=Content-Type content="text/html; charset=utf-8"><meta name=viewport content="width=device-width, initial-scale=1.0"><base href=/ ><link rel="shortcut icon" href=/favicon.ico><link rel=alternate type=application/rss+xml title="Thierry Crouzet" href=/feeds/feed.xml><link rel=preconnect href=https://www.googletagmanager.com><link rel=preconnect href=https://fonts.googleapis.com crossorigin><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&display=swap" rel=stylesheet><meta name=robots content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><meta name=google-site-verification content=EmtKKbIk2-Tz3Nyp7hJRPjcMbgf68Vwq6yJYs1hvsqA><meta name=msvalidate.01 content=805E5BFBA891A41968028F5C97A228D3><title>Optimiser les cartes des GPS Garmin - Thierry Crouzet</title><meta name=description content="J’utilise un GPS pour suivre des traces, que ce soit en bikepacking, ou lors de randonnées organisées par des tiers, ou même lorsque je trace mes propres par..."><link href=https://tcrouzet.com/2020/10/23/optimiser-les-cartes-des-gps-garmin/ rel=canonical><meta property=og:locale content=fr_FR><meta property=og:type content=article><meta property=og:title content="Optimiser les cartes des GPS Garmin"><meta property=og:description content="J’utilise un GPS pour suivre des traces, que ce soit en bikepacking, ou lors de randonnées organisées par des tiers, ou même lorsque je trace mes propres par..."><meta content=https://tcrouzet.com/2020/10/23/optimiser-les-cartes-des-gps-garmin/ property=og:url><meta property=og:site_name content="Thierry Crouzet"><meta content=https://www.facebook.com/ThierryCrouzetAuteur/ property=article:publisher><meta content=https://www.facebook.com/ThierryCrouzetAuteur/ property=article:author><meta property=article:published_time content=2020-10-23T17:32:00+02:00><meta property=article:modified_time content=2024-04-30T10:08:48+02:00><meta property=og:image content=/images_tc/2020/10/mapcode.webp><meta property=og:image:width content=1600><meta property=og:image:height content=1000><meta property=og:image:type content=image/webp><meta name=author content="Thierry Crouzet"><link rel=stylesheet id=style-css href="/style.css?ver=2" type=text/css media=screen></head><body id=mybody><div id=top><div id=author><div id=toggle class=open></div><span id=nomsmall><a href=/ title="Accueil, Thierry Crouzet" alt="Accueil, Thierry Crouzet">Thierry <b>CROUZET</b></a></span></div><div id=toggle-search></div><div id=access class="access pageGutter"></div><div id=access-search class="access pageGutter"></div></div><div id=top-spacer></div><div id=content class=infinite role=main><article id=article-2085 itemscope itemtype=https://schema.org/BlogPosting><meta itemprop=articleSection content=velo><meta itemprop=name content=Article><meta itemprop=inLanguage content=fr-FR><meta itemprop=author content="Thierry Crouzet"><meta itemprop=accountablePerson content="Thierry Crouzet"><meta itemprop=datePublished content=2020-10-23T17:32:00+02:00><meta itemprop=dateModified content=2024-04-30T10:08:48+02:00><meta content=https://tcrouzet.com/2020/10/23/optimiser-les-cartes-des-gps-garmin/ itemprop=url><div class="poster maxContainerWidth"><img width=1600 height=1000 src=/images_tc/2020/10/mapcode.webp class="poster-img 
    poster-img-full" alt loading=lazy decoding=async srcset=" 250w,  1024w, /images_tc/2020/10/mapcode.webp 1600w" sizes="(max-width: 1600px) 100vw, 1600px"><div class=poster-legend>Faut entrer dans le code</div><div class=poster-title><h1 itemprop=headline id=title2085> Optimiser les cartes des GPS Garmin </h1><div class=poster-subtitle><div class=poster-serie><a href=/2020/10/20/mini-aventure-gravel-de-la-nuit-a-la-nuit/ class=prev>&lt; </a><a href=/tag/borntobike>Vélo 71</a> ● <span itemprop=datePublished content=2020-10-23T17:32:00 title="Publié à 17:32"> <a href=/2020/ >23 octobre 2020</a></span><a href=/2020/11/02/une-journee-volee-pour-vivre/ class=next> &gt;</a></div><div class=plus-contenair><div class=sharemain><div class=share><div class=crunchify-social><a class="icon_com icon" href=/mail/ target=_blank title="Envoyer un commentaire"></a><a class="icon_mail icon" href="mailto:?subject=Optimiser+les+cartes+des+GPS+Garmin&body=Regarde: 2020/10/23/optimiser-les-cartes-des-gps-garmin/" title="Partager par mail"></a><a class="icon_share icon" href=javascript:void(0); onclick=copyText() title=Partager></a></div></div></div><div class=plus>&bull;&bull;&bull;<ul><li><a href="http://www.printfriendly.com/print?url=2020/10/23/optimiser-les-cartes-des-gps-garmin/&partner=sociable">Imprime le billet/PDF</a></li><li><a href="https://tcrouzet-com.translate.goog2020/10/23/optimiser-les-cartes-des-gps-garmin//?_x_tr_sl=fr&_x_tr_tl=en&_x_tr_hl=en">Version EN/US</a></li><li><a href=/abonnement-par-mail/ >Abonne-toi</a></li><li>Tags : <a href=/tag/gps>Gps </a><a href=/tag/velo>Velo </a></li><li><a href=http://creativecommons.org/licenses/by-nc-sa/4.0/deed.fr class=footertitre>(cc)</a>&#8239;<a href=/informations/ >Thierry&#8239;Crouzet</a></li></ul></div></div></div></div><div class="post hentry" itemprop=articleBody id=post-2085><p>J’utilise un GPS pour suivre des traces, que ce soit en bikepacking, ou lors de randonnées organisées par des tiers, ou même lorsque je trace mes propres parcours. Mon problème : la plupart des cartes disponibles pour Garmin sont surchargées d’informations et de couleurs, et la trace se confond souvent avec elles, surtout en plein soleil, et la suivre devient alors difficile. J’ai donc décidé de créer une carte optimisée.</p><h3>Rendu avec carte Garmin</h3><div class=image id=image-2085-1><img alt="Rendu Garmin" class="alignnone size-full paysage" decoding=async height=1093 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2020/10/newmap-garmin.webp srcset="/images_tc/2020/10/newmap-garmin.webp 1600w, /images_tc/2020/10/newmap-garmin.webp 1024w, /images_tc/2020/10/newmap-garmin.webp 250w" width=1600><div class=legend>Rendu Garmin</div></div><p>Selon moi, la carte fournie par Garmin est trop colorée pour le suivi de trace (ce serait possible si Garmin offrait la possibilité de calibrer la taille de la trace, ce qui n’est pas le cas sur mon nouveau 530 et ne l’était pas davantage sur mon 820). On ne peut que changer la couleur de la trace (et cela fastidieusement au coup par coup). Notez que la capture d’écran effectuée sur BaseCamp est très flatteuse.</p><h3>Rendu avec carte OSM new style</h3><div class=image id=image-2085-2><img alt="Rendu OSM new style" class="alignnone size-full paysage" decoding=async height=1093 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2020/10/newmap-newstyle.webp srcset="/images_tc/2020/10/newmap-newstyle.webp 1600w, /images_tc/2020/10/newmap-newstyle.webp 1024w, /images_tc/2020/10/newmap-newstyle.webp 250w" width=1600><div class=legend>Rendu OSM new style</div></div><p>Jusqu’alors ma favorite, <a href=https://garmin3.bbbike.org/ >la version OSM téléchargeable gratuitement</a> reste quelque peu baroque, avec notamment des routes souvent colorées.</p><h3>Rendu avec ma carte</h3><div class=image id=image-2085-3><img alt="Rendu OSM minimaliste" class="alignnone size-full paysage" decoding=async height=1093 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2020/10/newmap-minimalist.webp srcset="/images_tc/2020/10/newmap-minimalist.webp 1600w, /images_tc/2020/10/newmap-minimalist.webp 1024w, /images_tc/2020/10/newmap-minimalist.webp 250w" width=1600><div class=legend>Rendu OSM minimaliste</div></div><p>J’ai donc créé une trace OSM minimaliste, sans POI, sans texte, sans couleur ou presque. Au passage, j’ai fait passer le fichier France de 1,6 Go à 320 Mo, tout en incluant les données altimétriques.</p><p><a href=https://mega.nz/file/19FliI6a#sCYLfnpTCWx99PMWHVEUaq-IARhWUgK21BnswbvXXjQ>Vous pouvez télécharger la carte</a> (je ne vous garantis pas de la mettre à jour souvent). Pour l’installer, copiez le fichier dans le dossier Garmin de votre GPS. Si une carte du même nom existe, renommez-là. Il vous reste à dire au GPS d’utiliser de préférence la nouvelle carte (ce qui revient à désactiver les autres). Attention, cette carte n’est pas routable et ne sert que lors du suivi de traces (sur les nouveaux Garmin on peut créer des profils avec des cartes différentes).</p><h3>Rendu avec carte IGN</h3><div class=image id=image-2085-4><img alt="Rendu IGN" class="alignnone size-full paysage" decoding=async height=1093 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2020/10/newmap-ign.webp srcset="/images_tc/2020/10/newmap-ign.webp 1600w, /images_tc/2020/10/newmap-ign.webp 1024w, /images_tc/2020/10/newmap-ign.webp 250w" width=1600><div class=legend>Rendu IGN</div></div><p>Sur le Garmin 820, je n’utilisais pas l’IGN parce que l’affichage se traînait tout en manquant de précision. Avec le 530, c’est nettement plus fluide et le contraste de la trace est bien meilleur que sur les cartes Garmin ou OSM. C’est une alternative onéreuse à mon bricolage.</p><h3>Geek only</h3><p>Je résume comment je m’y suis pris pour fabriquer cette carte, tout en faisant hurler le Mac (la même manip marche sous Windows).</p><ol><li><a href=https://www.java.com/fr/download/ >Installer Java</a>.</li><li><a href=https://www.oracle.com/java/technologies/javase-jdk15-downloads.html>Installer Java SE Development Kit</a>.</li><li>Créer un dossier de travail (dans mon cas <em>~/Documents/GarminMaps/tools/</em>).</li><li><a href=https://download.geofabrik.de/europe/france.html>Télécharger dans le dossier <em>tools</em> la dernière source OSM pour France</a> (<a href=http://download.openstreetmap.fr/extracts/europe/ >possibilité de télécharger les régions, les départements, d’autres pays…</a>). Ce fichier a pour nom : <em>france-latest.osm.pbf</em>.</li><li><a href=http://www.mkgmap.org.uk/download/splitter.html>Télécharger Splitter</a>, un logiciel qui découpera la carte OSM pour que le Mac puisse la digérer.</li><li><a href=http://www.mkgmap.org.uk/download/mkgmap.html>Télécharger Mkgmap</a>, un logiciel qui recollera les bouts et créera une carte au format Garmin.</li><li><a href=https://mega.nz/file/RplyUa7L#DZtAnF6QgfrxCWEquqLv0rAyeDAopUPBH-De1C_xscY>Télécharger les styles de la nouvelle carte</a> (voilà qui m’a pris la tête et je suis loin d’être devenu un expert du sujet). Reste pas mal de boulot à faire pour créer la carte optimale.</li><li>Décompresser le dossier <em>mystyle</em>. Il contient les fichiers texte qui contrôlent le rendu de la carte.</li><li>Ouvrir le terminal et aller dans <em>tools</em> avec un <em>cd /Users/thierrycrouzet/Documents/GarminMaps/tools/</em>.</li><li>Exécuter Spliter avec <em>java -Xmx3000m -jar splitter/splitter.jar --max-nodes=1100000 france-latest.osm.pbf --output-dir=outputsplit</em>. Ça prend un bon moment.</li><li>Exécuter Mkgmap avec <em>java -Xmx3000m -jar mkgmap/mkgmap.jar --style-file=mystyle --output-dir=output --no-net --product-id=1 --overview-mapname="OSM minimalist" --family-name="OSM minimalist" --series-name="OSM minimalist" --description="OSM minimalist" --area-name="OSM minimalist" --gmapsupp -c outputsplit/template.args</em>. C’est reparti pour au moins aussi longtemps.</li><li>La carte <em>gmapsupp.img</em> se retrouve dans le dossier <em>output</em>.</li><li>J’ai dû picorer des infos <a href=https://wiki.openstreetmap.org/wiki/FR:Mkgmap>ici</a> et <a href=https://github.com/ligfietser/mkgmap-style-sheets>là</a> ou encore <a href=https://www.cferrero.net/maps/guide_to_mkgmap_style_files.html>là</a> avant de m’en sortir, et aussi en tâtonnant beaucoup.</li></ol><div class="sharebas pageGutter"><div class=sharemain><div class=share><div class=crunchify-social><a class="icon_com icon" href=/mail/ target=_blank title="Envoyer un commentaire"></a><a class="icon_mail icon" href="mailto:?subject=Optimiser+les+cartes+des+GPS+Garmin&body=Regarde: 2020/10/23/optimiser-les-cartes-des-gps-garmin/" title="Partager par mail"></a><a class="icon_share icon" href=javascript:void(0); onclick=copyText() title=Partager></a></div></div></div></div></div><div class=load-more-url next-url=/2020/10/20/mini-aventure-gravel-de-la-nuit-a-la-nuit/ style="display: none;"></div></article><form id=mailchimp class=pageGutter><div id=thema><label class=checkbox for=mc-blog><input checked=1 type=checkbox value=1 name=mc-blog id=mc-blog>Blog</label><label class=checkbox for=mc-carnet><input checked=1 type=checkbox value=2 name=mc-carnet id=mc-carnet>Carnets</label><label class=checkbox for=mc-ecriture><input checked=1 type=checkbox value=3 name=mc-ecriture id=mc-ecriture>Écriture</label><label class=checkbox for=mc-bike><input checked=1 type=checkbox value=4 name=mc-bike id=mc-bike>Vélo</label><label class=checkbox for=mc-daylog><input checked=1 type=checkbox value=1 name=mc-daylog id=mc-daylog>Genlog</label></div><div aria-hidden=true style="position: absolute; left: -5000px;"><input type=text name=b_4346e7140965015f0594fffcd_f8567ebe86 tabindex=-1 value><input type=text name=b_b7e4cf04c803fc0f26b2fff20_4580f38547 tabindex=-1 value></div><input aria-label="Votre email" type=email name=mc-email id=mc-email onblur="if (this.value==\'\') this.value=\'Ton mail\'" value="Ton mail" onfocus="if (this.value==\'Ton mail\') this.value=\'\'"><input type=hidden value=blog-crouzet name=feed_id><input type=submit name=subscribe value=Abonne-toi alt=Abonne-toi title=Abonne-toi><div id=mc-message></div></form></div><a href=/2020/10/20/mini-aventure-gravel-de-la-nuit-a-la-nuit/ ><div next-url=/2020/10/20/mini-aventure-gravel-de-la-nuit-a-la-nuit/ id=loadMore></div></a><script type=text/javascript src="/toggle.js?ver=2" id=toggle-js></script><div id=copyMessage></div></body></html>