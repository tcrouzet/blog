<article id=article-532 itemscope itemtype=https://schema.org/BlogPosting><meta itemprop=articleSection content=velo><meta itemprop=name content=Article><meta itemprop=inLanguage content=fr-FR><meta itemprop=author content="Thierry Crouzet"><meta itemprop=accountablePerson content="Thierry Crouzet"><meta itemprop=datePublished content=2023-10-23T19:38:00+02:00><meta itemprop=dateModified content=2024-06-09T06:42:31+02:00><meta content=https://tcrouzet.com/2023/10/23/enrichir-automatiquement-vos-itineraires-avec-des-points-dinteret/ itemprop=url><div class="poster maxContainerWidth"><img width=1792 height=985 src=/images_tc/2023/10/pois.webp class="poster-img poster-img-full" alt loading=lazy decoding=async type=image/webp srcset="/images_tc/2023/10/pois.webp 1600w" sizes="(max-width: 1600px) 100vw, 1600px"><div class="poster-legend poster-legend-right">ChatGPT</div></div><h1 itemprop=headline id=title532 class=maxContainerWidth> Enrichir automatiquement vos itinéraires avec des points d’intérêt </h1><h2><a href=/2023/10/17/promo-devenements-velo-avec-les-ia/ class=prev>&lt; </a><a href=/tag/borntobike>Vélo 149</a> ● <span itemprop=datePublished content=2023-10-23T19:38:00 title="Publié à 19:38"> <a href=/2023/ >23 octobre 2023</a></span><a href=/2023/10/29/asphalte-gravier-ou-terre/ class=next> &gt;</a></h2><div class="post hentry" itemprop=articleBody id=post-532><p>Lors des grosses journées à VTT ou gravel dans la cambrousse, notamment en bikepacking, je me sens toujours mieux quand j’ai une vague idée de quand je pourrai me ravitailler. J’évite ainsi de me surcharger, de trop acheter ou d’en venir à manquer. Quand je reconnais <a href=https://727bikepacking.fr>les 727</a>, j’ai pris l’habitude de photographier les points d’eau, les boulangeries, les restaurants, les éventuels spots de bivouac, puis de reporter ces POI (points d’intérêt) sur GoogleMap et VisuGPX.</p><p>C’est devenu un réflexe. Sans perdre beaucoup de temps, j’offre un service aux participants des 727 que peu d’organisateurs proposent (et dans les recoins de l’Hérault, mieux vaut savoir anticiper les ravitaillements). Si certains organisateurs ne maîtrisent pas les arcanes des GPX et autres KML, d’autres s’abstiennent de lister des POI au nom de l’aventure. Ne rien savoir d’une trace ne ferait qu’en augmenter la difficulté. Comme je ne m’intéresse pas au vélo masochiste, je préfère fuir ces évènements qui ont pour ambition première de nous faire souffrir.</p><p>Mais en juillet dernier, <a href=/2023/07/16/tour-du-massif-vosgien-le-bikepacking-a-ne-pas-manquer-en-juillet/ >à l’occasion du TMV</a>, je me suis retrouvé face à une trace non enrichie à cause d’un manque de compétence technique de l’aveu même de l’organisateur Pascal Chabanse. J’avais une première solution : sur VisuGPX avec en fond la cartographie OSM, j’aurais pu suivre virtuellement le tracé et relever à la main les POI à proximité. Je m’étais payé ce luxe fastidieux lors de la création du <a href=/../../page/p27>P27</a>, aussi parce qu’il s’agissait d’une trace théorique sans reconnaissance, et que je voulais la suivre sur la carte pour la valider.</p><div class=image id=image-532-1><img alt="POI sur le g727" class="alignnone size-full paysage" decoding=async height=1183 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2023/10/g727pois.webp srcset="/images_tc/2023/10/g727pois.webp 1600w, /images_tc/2023/10/g727pois.webp 1024w, /images_tc/2023/10/g727pois.webp 250w" width=1661><div class=legend>POI sur le g727</div></div><p>Je n’avais ni le temps ni le courage de recommencer pour le TMV. Avec l’aide de ChatGPT, j’ai pondu un bout de code en PHP pour remonter automatiquement les POI. Je viens de convertir ce code en Python et je peux désormais vous <a href="https://colab.research.google.com/drive/14TTY1j3InZca3ShhdHWWrfcoDUeyFmTR?usp=sharing">le partager sur Codelab</a>. Tout en bas du document, on peut uploader un GPX, lancer l’exportation des POI, puis récupérer un fichier KML compatible GoogleMap.</p><div class=image id=image-532-2><img alt=Colab class="alignnone size-full paysage" decoding=async height=606 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2023/10/colab.png srcset="/images_tc/2023/10/colab.png 1600w, /images_tc/2023/10/colab.png 1024w, /images_tc/2023/10/colab.png 250w" width=734><div class=legend>Colab</div></div><p>À partir du GPX, mon code crée une requête <a href=https://overpass-turbo.eu/ >Overpass</a>, récupère tous les POI dans le parallélogramme défini par le GPX, puis recherche ceux qui sont à moins de 250 mètres de la trace (paramètre défini en haut du code). Je n’utilise pas l’API Google Places parce qu’il est très vite payant.</p><div class=image id=image-532-3><img alt=Overpass class="alignnone size-full paysage" decoding=async height=1026 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2023/10/overpass-scaled.webp srcset="/images_tc/2023/10/overpass-scaled.webp 1600w, /images_tc/2023/10/overpass-scaled.webp 1024w, /images_tc/2023/10/overpass-scaled.webp 250w" width=2560><div class=legend>Overpass</div></div><p>Des outils comme <a href=https://www.gpsvisualizer.com/convert_input>GPSVisualizer</a> permettent de convertir les KML en GPX. <a href=/2023/03/24/comment-je-prepare-mon-gps-pour-un-bikepacking/ >On peut également les importer directement dans Garmin Basecamp pour les transférer aux GPS.</a> Pour ma part, j’aime envoyer les GoogleMap enrichies à l’application <a href=https://mapout.app/ >MapOut</a> sur iPhone, à laquelle je me reporte très souvent quand je roule. J’espère que ce petit bout de code vous aidera dans vos périples hors des sentiers battus.</p><div class="sharebas pageGutter"><div class=sharemain><div class=share><div class=crunchify-social><a class="icon_com icon" href=javascript:void(0); onclick=showComments(this) title=Commenter><span class=count>&nbsp;&nbsp;</span></a><a class="icon_share icon" href=javascript:void(0); onclick=copyText() title=Partager></a></div></div><div class=plus>&bull;&bull;&bull; <ul><li><a href="http://www.printfriendly.com/print?url=2023/10/23/enrichir-automatiquement-vos-itineraires-avec-des-points-dinteret/&partner=sociable">Imprime le billet/PDF</a></li><li><a href="https://tcrouzet-com.translate.goog2023/10/23/enrichir-automatiquement-vos-itineraires-avec-des-points-dinteret//?_x_tr_sl=fr&_x_tr_tl=en&_x_tr_hl=en">Version EN/US</a></li><li>Tags : <a href=/tag/borntobike>Vélo </a> <a href=/tag/gps>Gps </a> </li><li><a href=http://creativecommons.org/licenses/by-nc-sa/4.0/deed.fr class=footertitre>(cc)</a>&#8239;<a href=/page/informations/ >Thierry&#8239;Crouzet</a></li></ul></div></div></div><div class=comments><form method=POST onsubmit="submitComment(this); return false;" class=commentForm><input type=hidden value=2023/10/23/enrichir-automatiquement-vos-itineraires-avec-des-points-dinteret/ name=postUrl><input type=hidden name=postTitle value="Enrichir automatiquement vos itinéraires avec des points d’intérêt"><label>Email: <input autocomplete=off name=email type=email style="width: 100%;" placeholder="Votre email" required></label><label>Nom: <input autocomplete=off name=nom type=text style="width: 100%;" placeholder="Votre nom" required></label><br><label>Message:<br><textarea name=message style="width: 100%;height:10rem" placeholder="Votre commentaire" required></textarea></label><br><div class=messageTypeSection></div><button type=submit>Envoyer</button><br><div class=message></div></form></div></div></article>