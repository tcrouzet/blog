<!DOCTYPE html><html lang=fr><head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0"><style>::before,::after{box-sizing:border-box}html{background-color:#fffbd4;color:black;font-family:Monospace;-webkit-text-size-adjust:100%;tab-size:4;font-size:100%;box-sizing:border-box;text-rendering:optimizeLegibility}body{max-width:90ch;margin:0 auto;padding:0 1rem}button,input,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}button,[type='button'],[type='submit']{appearance:button}:root{--font-size:1.3rem;--line-height:calc(1ex/0.32);--font-size-small:1rem;--font-size-title:calc(var(--font-size)*2.4);--font-size-h3:1.7rem;--top-height:3rem}button,input,select,textarea,label{font-family:var(--font-headings)}h1,h2,h3,h6,nav,header{font-family:monospace;font-weight:bold}h4{font-weight:bold}button,a{cursor:pointer}a,a:visited,a:active,a:hover{color:inherit;text-decoration:none;border:0}footer{margin:2rem 0 4rem 0}header{display:flex;align-items:center;height:var(--top-height);gap:1rem}header>a[aria-label="Accueil"]{font-size:1.35rem}header>a[aria-label="Menu"]{margin-left:auto}main{margin-top:1rem}article header{display:contents}article header figure{width:100%;margin:0;padding:0}article header figure img{width:100%;height:70vh;object-fit:cover}.poster-book{object-fit:contain;object-position:left center}main[itemtype$="CollectionPage"] article img.poster-img-book-small{width:100%;height:auto;aspect-ratio:3/4.5;border:1pt solid}h1{font-size:var(--font-size-title);line-height:1.1;margin:1rem auto}nav{margin:2rem 0;font-weight:normal}nav a.prev{margin-right:.5rem}nav a.next{margin-left:.5rem}p,li{font-size:var(--font-size);line-height:var(--line-height);margin-top:1rem;overflow-wrap:break-word}section[itemprop="articleBody"]>p:first-child::first-letter {font-family:var(--font-headings);font-weight:700;font-size:large}pre{margin:1rem auto 0}ul,ol{margin:0 auto}ul{list-style-type:none;padding-left:2rem;padding-right:1rem}ul li{position:relative;padding-left:1.5em}ul li::before{content:"•";font-size:2rem;position:absolute;left:-.5rem}ol{list-style-type:decimal}li p{margin:0;padding:0}article section a{background:linear-gradient(to bottom,black 95%,black 100%);background-repeat:no-repeat;background-size:100% 1px;background-position:0 calc(100% - 0.1ex)}blockquote{margin:1rem 0;font-style:italic}blockquote p{margin:0 2em;font-style:italic}article section figure{display:block;margin:1.6rem auto;text-align:center;width:100%}article section figure img{border:1px solid #ccc;width:100%;height:auto}figcaption{font-weight:normal;text-align:right;padding-right:0;font-size:.6em}figcaption.legend-center{text-align:right;padding:0}article section h2,article section h3,article section h4{margin:1.6rem auto 0;line-height:var(--line-height)}article section h2,article section h3{font-size:var(--font-size-h3)}article section h4{font-size:smaller}article section h5{text-align:right;font-size:var(--font-size)}article section hr{width:10ch;margin:2rem auto;border:1px solid}article section iframe{padding:1rem 0;display:block;width:100%}code{white-space:pre-wrap;display:block;padding:1rem;border-radius:4px;font-family:'Monaco','Consolas',monospace;font-size:.8em;overflow-x:auto}article footer{margin:1rem 0}main[itemtype$="CollectionPage"]{text-align:center;display:flex;flex-wrap:wrap;justify-content:space-between;margin:var(--top-height) auto 0;max-width:90rem}main[itemtype$="CollectionPage"] nav *{margin:0}main[itemtype$="CollectionPage"] nav{display:flex;align-items:baseline;gap:1.5rem;width:100%;flex-wrap:wrap;margin:0 0 1rem}main[itemtype$="CollectionPage"] article{display:inline-block;position:relative;width:100%;margin-bottom:1.6rem;cursor:pointer;text-align:left}main[itemtype$="CollectionPage"] data{font-weight:bold;text-align:center;background-color:black;color:#fffbd4;min-width:3rem;margin-right:.5rem;display:inline-block}main[itemtype$="CollectionPage"] h2{font-size:var(--font-size);font-weight:normal;margin:0}main[itemtype$="CollectionPage"] h3{display:inline;font-size:1.2rem}article[itemtype$="Book"]>section[itemprop="articleBody"]>h2:first-of-type{margin:0 auto;font-size:var(--font-size-h3);font-weight:normal}h6{font-size:var(--font-size);margin:.5rem auto 0}.book_genre{color:var(--color-medium);font-variant:small-caps}main[itemtype$="AboutPage"] section h2{margin:2rem 0 .5rem}main[itemtype$="AboutPage"] section h3{font-weight:normal;margin:0}footer section{display:flex;width:100%;margin:2rem auto;gap:1rem;flex-wrap:wrap;align-items:center}footer section button,footer section a,footer section label{display:inline;width:auto;text-align:center;background:transparent;border:0;cursor:pointer}div.comments{display:none;width:100%;margin:0}.com-toggle:checked ~ div.comments{display:block !important}div.comments form{margin-top:1rem}div.comments form input[type="email"],div.comments form input[type="text"]{width:50%;box-sizing:border-box}div.comments form textarea{width:100%;box-sizing:border-box}div.comments form input[type="radio"]{display:inline;margin-right:.5rem}div.comments form button,[type='button'],[type='submit']{display:block;color:#fffbd4;background-color:black}div.comments form fieldset{border:0;margin:0;padding:0}div.comments form legend{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}div.comments h5{text-align:left;font-weight:bold;font-family:var(--font-headings)}footer>div:last-of-type{font-family:var(--font-headings);display:flex;justify-content:center;width:100%;margin-bottom:2rem;gap:1rem}footer>div:last-of-type a{display:inline-flex;align-items:center;gap:8px;background-color:#e30613;color:var(--color-contrast);border-radius:30px;padding:10px 18px;font-size:1rem;border:0}.link-background{background:#70f !important}#menu{margin:var(--top-height) 0 0 0;font-family:var(--font-headings)}#menu hr{margin:1.5rem 0;border:1px solid}#menu h1{font-size:var(--font-size);text-transform:uppercase;font-weight:normal;margin:0 0 .5rem 0;padding:0;text-align:left}#menu ul{margin:0;padding:0;max-width:100%}#menu ul li{font-family:var(--font-headings);display:inline-block;margin:0 1rem 0 0;padding:0}#menu ul li::before{content:none}#search{font-family:var(--font-headings);margin-top:var(--top-height);display:flex;flex-direction:column;justify-content:center;align-items:center;height:60vh;text-align:center}#search ul li{display:inline-block;margin:0 1rem 0 0;padding:0}#search ul li::before{content:none}@media(max-width:40ch){:root{--font-size:1rem}label{margin-right:.5em}main[itemtype$="CollectionPage"] nav{gap:.5rem;justify-content:flex-start}}@media(max-width:70ch){article header figure img{height:40vh}h1{font-size:calc(var(--font-size)*2)}main[itemtype$="CollectionPage"] nav h1{padding:0;font-size:1.2rem}#menu div{display:block}#menu ul li{display:block}#menu div a{width:100%;min-height:15vh;margin-bottom:1em}main[itemtype$="CollectionPage"] nav{gap:.5rem;font-size:smaller}}</style><title>Enrichir automatiquement vos itinéraires avec des points d’intérêt</title><link rel="shortcut icon" href=/favicon.ico><link rel=alternate type=application/rss+xml title="Thierry Crouzet" href=/feeds/feed.xml><meta name=robots content="index, follow"><meta name=google-site-verification content=EmtKKbIk2-Tz3Nyp7hJRPjcMbgf68Vwq6yJYs1hvsqA><meta name=msvalidate.01 content=805E5BFBA891A41968028F5C97A228D3><meta name=description content="Lors des grosses journées à VTT ou gravel dans la cambrousse, notamment en bikepacking, je me sens toujours mieux quand j’ai une vague idée de quand je pourrai…"><meta name=author content="Thierry Crouzet"><link href=https://static.tcrouzet.com/2023/10/23/enrichir-automatiquement-vos-itineraires-avec-des-points-dinteret/ rel=canonical><link rel=me href=https://mamot.fr/@tcrouzet><meta name=fediverse:creator content=@tcrouzet@mamot.fr><meta property=og:title content="Enrichir automatiquement vos itinéraires avec des points d’intérêt"><meta property=og:description content="Lors des grosses journées à VTT ou gravel dans la cambrousse, notamment en bikepacking, je me sens toujours mieux quand j’ai une vague idée de quand je pourrai…"><meta content=https://static.tcrouzet.com/2023/10/23/enrichir-automatiquement-vos-itineraires-avec-des-points-dinteret/ property=og:url><meta property=og:locale content=fr_FR><meta property=og:type content=article><meta property=og:site_name content="Thierry Crouzet"><meta property=article:author content="Thierry Crouzet"><meta property=article:published_time content=2023-10-23T19:38:00+02:00><meta property=article:modified_time content=2024-06-09T06:42:31+02:00><meta property=og:image content=https://static.tcrouzet.com/images_tc/2023/10/pois.jpeg><meta property=og:image:width content=1024><meta property=og:image:height content=562><meta property=og:image:alt content=ChatGPT><meta name=twitter:card content=summary_large_image><meta name=twitter:image content=https://static.tcrouzet.com/images_tc/2023/10/pois.jpeg><meta name=twitter:title content="Enrichir automatiquement vos itinéraires avec des points d’intérêt"><meta name=twitter:description content="Lors des grosses journées à VTT ou gravel dans la cambrousse, notamment en bikepacking, je me sens toujours mieux quand j’ai une vague idée de quand je pourrai…"></head><body><header><a aria-label=Accueil href=/ title=Accueil>Thierry CROUZET</a><a href=/menu/ aria-label=Menu>Menu</a><a href=/page/abonnement-par-mail/ aria-label=Newsletter>Newsletter</a><a href=/search/ aria-label=Recherche>Recherche</a><a href=/page/me-soutenir/ aria-label=Soutien>€</a></header><main><article itemscope itemtype=https://schema.org/BlogPosting><header><figure><img width=1024 height=562 src=/images_tc/2023/10/pois.webp alt=ChatGPT fetchpriority=high decoding=async itemprop=image srcset="/images_tc/2023/10/pois-small.webp 300w,/images_tc/2023/10/pois-small.webp 1024w,/images_tc/2023/10/pois.webp 1024w" sizes="(min-width: 90ch) 90ch, 100vw"><figcaption>ChatGPT</figcaption></figure><h1 itemprop=headline>Enrichir automatiquement vos itinéraires avec des points d’intérêt</h1><nav><a href=/2023/10/17/promo-devenements-velo-avec-les-ia/ class=prev rel=prev>&lt; </a><a href=/tag/velo itemprop=articleSection>Vélo 149</a> - <a href=/2023/ ><time datetime=2023-10-23T19:38:00 title="Publié à 19:38">23 October 2023</time></a><a href=/2023/10/29/asphalte-gravier-ou-terre/ class=next rel=next> &gt;</a></nav></header><section itemprop=articleBody><p>Lors des grosses journées à VTT ou gravel dans la cambrousse, notamment en bikepacking, je me sens toujours mieux quand j’ai une vague idée de quand je pourrai me ravitailler. J’évite ainsi de me surcharger, de trop acheter ou d’en venir à manquer. Quand je reconnais <a href=https://727bikepacking.fr rel="noopener noreferrer">les 727</a>, j’ai pris l’habitude de photographier les points d’eau, les boulangeries, les restaurants, les éventuels spots de bivouac, puis de reporter ces POI (points d’intérêt) sur GoogleMap et VisuGPX.</p><p>C’est devenu un réflexe. Sans perdre beaucoup de temps, j’offre un service aux participants des 727 que peu d’organisateurs proposent (et dans les recoins de l’Hérault, mieux vaut savoir anticiper les ravitaillements). Si certains organisateurs ne maîtrisent pas les arcanes des GPX et autres KML, d’autres s’abstiennent de lister des POI au nom de l’aventure. Ne rien savoir d’une trace ne ferait qu’en augmenter la difficulté. Comme je ne m’intéresse pas au vélo masochiste, je préfère fuir ces évènements qui ont pour ambition première de nous faire souffrir.</p><p>Mais en juillet dernier, <a href=//2023/10/23/tour-du-massif-vosgien-le-bikepacking-a-ne-pas-manquer-en-juillet/ >à l’occasion du TMV</a>, je me suis retrouvé face à une trace non enrichie à cause d’un manque de compétence technique de l’aveu même de l’organisateur Pascal Chabanse. J’avais une première solution : sur VisuGPX avec en fond la cartographie OSM, j’aurais pu suivre virtuellement le tracé et relever à la main les POI à proximité. Je m’étais payé ce luxe fastidieux lors de la création du <a href=/../../page/p27>P27</a>, aussi parce qu’il s’agissait d’une trace théorique sans reconnaissance, et que je voulais la suivre sur la carte pour la valider.</p><figure><img alt="POI sur le g727" decoding=async height=729 loading=lazy sizes="(min-width: 90ch) 90ch, 100vw" src=/images_tc/2023/10/g727pois.webp srcset="/images_tc/2023/10/g727pois.webp 1024w, /images_tc/2023/10/g727pois-small.webp 300w" width=1024><figcaption>POI sur le g727</figcaption></figure><p>Je n’avais ni le temps ni le courage de recommencer pour le TMV. Avec l’aide de ChatGPT, j’ai pondu un bout de code en PHP pour remonter automatiquement les POI. Je viens de convertir ce code en Python et je peux désormais vous <a href="https://colab.research.google.com/drive/14TTY1j3InZca3ShhdHWWrfcoDUeyFmTR?usp=sharing" rel="noopener noreferrer">le partager sur Codelab</a>. Tout en bas du document, on peut uploader un GPX, lancer l’exportation des POI, puis récupérer un fichier KML compatible GoogleMap.</p><figure><img alt=Colab class=small decoding=async height=606 loading=lazy sizes="(min-width: 90ch) 90ch, 100vw" src=/images_tc/2023/10/colab.png srcset="/images_tc/2023/10/colab.png 734w, /images_tc/2023/10/colab-small.png 300w" width=734><figcaption class="legend legend-center">Colab</figcaption></figure><p>À partir du GPX, mon code crée une requête <a href=https://overpass-turbo.eu/ rel="noopener noreferrer">Overpass</a>, récupère tous les POI dans le parallélogramme défini par le GPX, puis recherche ceux qui sont à moins de 250 mètres de la trace (paramètre défini en haut du code). Je n’utilise pas l’API Google Places parce qu’il est très vite payant.</p><figure><img alt=Overpass decoding=async height=410 loading=lazy sizes="(min-width: 90ch) 90ch, 100vw" src=/images_tc/2023/10/overpass-scaled.webp srcset="/images_tc/2023/10/overpass-scaled.webp 1024w, /images_tc/2023/10/overpass-scaled-small.webp 300w" width=1024><figcaption>Overpass</figcaption></figure><p>Des outils comme <a href=https://www.gpsvisualizer.com/convert_input rel="noopener noreferrer">GPSVisualizer</a> permettent de convertir les KML en GPX. <a href=/2023/3/comment-je-prepare-mon-gps-pour-un-bikepacking>On peut également les importer directement dans Garmin Basecamp pour les transférer aux GPS.</a> Pour ma part, j’aime envoyer les GoogleMap enrichies à l’application <a href=https://mapout.app/ rel="noopener noreferrer">MapOut</a> sur iPhone, à laquelle je me reporte très souvent quand je roule. J’espère que ce petit bout de code vous aidera dans vos périples hors des sentiers battus.</p></section><footer><section><input type=checkbox id=com-621 class=com-toggle hidden><label for=com-621 title=Commenter>Commenter</label><a href=https://raw.githubusercontent.com/tcrouzet/md/refs/heads/main/2023/10/enrichir-automatiquement-vos-itineraires-avec-des-points-dinteret.md download title=Télécharger>Télécharger</a><a href=/page/lectures/ title="Sites amis">Sites amis</a><div class=comments><form method=POST action=https://formspree.io/f/mgebvkwn><input type=hidden value=/2023/10/23/enrichir-automatiquement-vos-itineraires-avec-des-points-dinteret/ name=postUrl><input type=hidden name=postTitle value="Enrichir automatiquement vos itinéraires avec des points d’intérêt"><input aria-label=Email autocomplete=on name=email type=email placeholder="Votre email" required><input aria-label=Nom autocomplete=on name=nom type=text placeholder="Votre nom" required><textarea aria-label=Message name=message placeholder="Votre commentaire" required></textarea><fieldset><legend>Visibilité</legend><label><input type=radio name=messageType value=private checked> Privé </label></fieldset><button type=submit>Envoyer</button></form></div></section></footer></article></main><footer> (cc) <a href=/page/informations/ >Thierry Crouzet</a></footer></body></html>