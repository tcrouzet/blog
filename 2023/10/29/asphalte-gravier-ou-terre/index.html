<!DOCTYPE html><html lang=fr xmlns=http://www.w3.org/1999/xhtml xmlns:og=http://opengraphprotocol.org/schema/ xmlns:fb=http://www.facebook.com/2008/fbml><head profile=http://gmpg.org/xfn/11><meta http-equiv=Content-Type content="text/html; charset=utf-8"><meta name=viewport content="width=device-width, initial-scale=1.0"><base href=/ ><link rel="shortcut icon" href=/favicon.ico><link rel=alternate type=application/rss+xml title="Thierry Crouzet" href=/feeds/feed.xml><link rel=preconnect href=https://www.googletagmanager.com><link rel=preconnect href=https://fonts.googleapis.com crossorigin><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&display=swap" rel=stylesheet><meta name=robots content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"><meta name=google-site-verification content=EmtKKbIk2-Tz3Nyp7hJRPjcMbgf68Vwq6yJYs1hvsqA><meta name=msvalidate.01 content=805E5BFBA891A41968028F5C97A228D3><title>Asphalte, gravier ou terre ? - Thierry Crouzet</title><meta name=description content="Je profite d’une crève tenace, qui m’empêche d’écrire autant que de pédaler pour pondre du code, potentiellement utile aux gravellistes, vététistes et bikepa..."><link href=https://tcrouzet.com/2023/10/29/asphalte-gravier-ou-terre/ rel=canonical><meta property=og:locale content=fr_FR><meta property=og:type content=article><meta property=og:title content="Asphalte, gravier ou terre ?"><meta property=og:description content="Je profite d’une crève tenace, qui m’empêche d’écrire autant que de pédaler pour pondre du code, potentiellement utile aux gravellistes, vététistes et bikepa..."><meta content=https://tcrouzet.com/2023/10/29/asphalte-gravier-ou-terre/ property=og:url><meta property=og:site_name content="Thierry Crouzet"><meta content=https://www.facebook.com/ThierryCrouzetAuteur/ property=article:publisher><meta content=https://www.facebook.com/ThierryCrouzetAuteur/ property=article:author><meta property=article:published_time content=2023-10-29T12:21:00+01:00><meta property=article:modified_time content=2024-04-30T08:24:30+02:00><meta property=og:image content=/images_tc/2023/10/stat_i3.png><meta property=og:image:width content=1792><meta property=og:image:height content=1024><meta property=og:image:type content=image/png><meta name=author content="Thierry Crouzet"><link rel=stylesheet id=style-css href="/style.css?ver=2" type=text/css media=screen></head><body id=mybody><div id=top><div id=author><div id=toggle class=open></div><span id=nomsmall><a href=/ title="Accueil, Thierry Crouzet" alt="Accueil, Thierry Crouzet">Thierry <b>CROUZET</b></a></span></div><div id=toggle-search></div><div id=access class="access pageGutter"></div><div id=access-search class="access pageGutter"></div></div><div id=top-spacer></div><div id=content class=infinite role=main><article id=article-476 itemscope itemtype=https://schema.org/BlogPosting><meta itemprop=articleSection content=velo><meta itemprop=name content=Article><meta itemprop=inLanguage content=fr-FR><meta itemprop=author content="Thierry Crouzet"><meta itemprop=accountablePerson content="Thierry Crouzet"><meta itemprop=datePublished content=2023-10-29T12:21:00+01:00><meta itemprop=dateModified content=2024-04-30T08:24:30+02:00><meta content=https://tcrouzet.com/2023/10/29/asphalte-gravier-ou-terre/ itemprop=url><div class="poster maxContainerWidth"><img width=1792 height=1024 src=/images_tc/2023/10/stat_i3.png class="poster-img 
    poster-img-full" alt loading=lazy decoding=async srcset=" 250w,  1024w, /images_tc/2023/10/stat_i3.png 1600w" sizes="(max-width: 1600px) 100vw, 1600px"><div class=poster-legend>Dall-e</div><div class=poster-title><h1 itemprop=headline id=title476> Asphalte, gravier ou terre ? </h1><div class=poster-subtitle><div class=poster-serie><a href=/2023/10/23/enrichir-automatiquement-vos-itineraires-avec-des-points-dinteret/ class=prev>&lt; </a><a href=/tag/borntobike>Vélo 150</a> ● <span itemprop=datePublished content=2023-10-29T12:21:00 title="Publié à 12:21"> <a href=/2023/ >29 octobre 2023</a></span><a href=/2023/11/10/bikepacking-eloge-des-grands-departs/ class=next> &gt;</a></div><div class=plus-contenair><div class=sharemain><div class=share><div class=crunchify-social><a class="icon_com icon" href=/mail/ target=_blank title="Envoyer un commentaire"></a><a class="icon_mail icon" href="mailto:?subject=Asphalte%2C+gravier+ou+terre%C2%A0%3F&body=Regarde: 2023/10/29/asphalte-gravier-ou-terre/" title="Partager par mail"></a><a class="icon_share icon" href=javascript:void(0); onclick=copyText() title=Partager></a></div></div></div><div class=plus>&bull;&bull;&bull;<ul><li><a href="http://www.printfriendly.com/print?url=2023/10/29/asphalte-gravier-ou-terre/&partner=sociable">Imprime le billet/PDF</a></li><li><a href="https://tcrouzet-com.translate.goog2023/10/29/asphalte-gravier-ou-terre//?_x_tr_sl=fr&_x_tr_tl=en&_x_tr_hl=en">Version EN/US</a></li><li><a href=/abonnement-par-mail/ >Abonne-toi</a></li><li>Tags : <a href=/tag/gps>Gps </a><a href=/tag/velo>Velo </a></li><li><a href=http://creativecommons.org/licenses/by-nc-sa/4.0/deed.fr class=footertitre>(cc)</a>&#8239;<a href=/informations/ >Thierry&#8239;Crouzet</a></li></ul></div></div></div></div><div class="post hentry" itemprop=articleBody id=post-476><div class=image id=image-476-1><img alt=Komoot class="alignnone size-full paysage" decoding=async height=622 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2023/10/stat05-komoot.webp srcset="/images_tc/2023/10/stat05-komoot.webp 1600w, /images_tc/2023/10/stat05-komoot.webp 1024w, /images_tc/2023/10/stat05-komoot.webp 250w" width=1466><div class=legend>Komoot</div></div><p>J’en arrive presque au bout de ma crève et je tiens un code Python que <a href="https://colab.research.google.com/drive/1OnIlVr7_iI2cLBQp10XpMCKpOhJtJOcc?usp=sharing">je partage dans Google Colab</a>. Pour l’exécuter, on lance <em>Exécution/Tout exécuter</em>, puis descend tout en bas jusqu’au bouton <em>Upload</em>. Si vous chargez une trace GPX, elle sera analysée, puis les stats s’afficheront.</p><p>Attention de ne pas charger une trace brute issue d’une très longue sortie. Vos GPS enregistrent des points tous les quelques mètres, ce qui génère des fichiers très lourds. Vous pouvez <a href=https://www.visugpx.com/ >réduire le nombre de points avec VisuGPX</a>, par exemple. La trace provisoire <a href=https://727.tcrouzet.com/i727/ >i727 2024</a> contient presque 14 000 points pour 545 km. Le code a eu besoin de près de 12 minutes pour générer les statistiques (le processus irait beaucoup plus vite sur un serveur dédié).</p><div class=image id=image-476-2><img alt=i727 class="alignnone size-full paysage" decoding=async height=808 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2023/10/Untitled-stat06.png srcset="/images_tc/2023/10/Untitled-stat06.png 1600w, /images_tc/2023/10/Untitled-stat06.png 1024w, /images_tc/2023/10/Untitled-stat06.png 250w" width=1360><div class=legend>i727</div></div><div class=image id=image-476-3><img alt=i727 class="alignnone size-full paysage" decoding=async height=814 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2023/10/stat07.png srcset="/images_tc/2023/10/stat07.png 1600w, /images_tc/2023/10/stat07.png 1024w, /images_tc/2023/10/stat07.png 250w" width=558><div class=legend>i727</div></div><div class=image id=image-476-4><img alt class="alignnone size-full paysage" decoding=async height=502 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2023/10/stat05-komoot3.png srcset="/images_tc/2023/10/stat05-komoot3.png 1600w, /images_tc/2023/10/stat05-komoot3.png 1024w, /images_tc/2023/10/stat05-komoot3.png 250w" width=736><div class=legend></div></div><p>Mes résultats sont proches de ceux de Komoot, logique puisque nous utilisons la même source OSM, malheureusement fautive. Mais on peut pallier ses erreurs avec un peu de pratique. Lors de l’exécution du code, j’affiche un bouton <em>Overpass Query</em>. Il permet de télécharger un fichier texte contenant une requête à coller dans la fenêtre de gauche d’<a href=https://overpass-turbo.eu/ >Overpass Turbo</a>. Quand on la lance, les voies rencontrées par votre trace s’affichent.</p><div class=image id=image-476-5><img alt=Overpass class="alignnone size-full paysage" decoding=async height=873 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2023/10/stat01-overpass.webp srcset="/images_tc/2023/10/stat01-overpass.webp 1600w, /images_tc/2023/10/stat01-overpass.webp 1024w, /images_tc/2023/10/stat01-overpass.webp 250w" width=1600><div class=legend>Overpass</div></div><p>Quand on clique sur une voie, les données la décrivant apparaissent. Parfois très complètes, parfois succinctes, parfois fausses. Dans ce dernier cas, on peut cliquer sur le crayon et aller directement modifier la cartographie OSM.</p><div class=image id=image-476-6><img alt=OSM class="alignnone size-full paysage" decoding=async height=490 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2023/10/stat04-box.webp srcset="/images_tc/2023/10/stat04-box.webp 1600w, /images_tc/2023/10/stat04-box.webp 1024w, /images_tc/2023/10/stat04-box.webp 250w" width=468><div class=legend>OSM</div></div><p>J’ai rencontré beaucoup de problèmes avec les Pistes de grade 1. Par exemple, une route de vigne de 2 km avec seulement dix mètres de gravier devient une piste de grade 1, au même niveau qu’une belle DFCI. Comme les informations de surface manquent souvent, impossible de les différencier. C’est une invitation pour améliorer OSM. De même, beaucoup de sentiers (paths dans OSM) sont classifiés comme pistes (tracks dans OSM).</p><div class=image id=image-476-7><img alt=Geojson class="alignnone size-full paysage" decoding=async height=874 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2023/10/stat08.webp srcset="/images_tc/2023/10/stat08.webp 1600w, /images_tc/2023/10/stat08.webp 1024w, /images_tc/2023/10/stat08.webp 250w" width=1600><div class=legend>Geojson</div></div><p>Pour vérifier la pertinence des statistiques et repérer les erreurs OSM, j’affiche également un bouton <em>Geojson Query</em>. On peut télécharger un fichier json et l’ouvrir dans <a href=geojson.io>Geojson.io</a>. On visualise ainsi la trace avec les segments colorés en fonction de leur nature. J’ai beaucoup utilisé cette possibilité lors du débogage. Cette approche permet également d’avoir une idée d’une trace rien qu’en regardant son trajet coloré.</p><div class=image id=image-476-8><img alt=i727 class="alignnone size-full paysage" decoding=async height=1400 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2023/10/Untitled-stat09-scaled.webp srcset="/images_tc/2023/10/Untitled-stat09-scaled.webp 1600w, /images_tc/2023/10/Untitled-stat09-scaled.webp 1024w, /images_tc/2023/10/Untitled-stat09-scaled.webp 250w" width=2560><div class=legend>i727</div></div><p>Enfin, tout en bas du notebook Codelab, j’ai indiqué comment j’avais rassemblé les données, extraites par la fonction find_terrain de la section OSM Analysis (assez simple, donc lisible sans une trop grande maîtrise de Python). On doit pouvoir améliorer ce point. Vous pouvez jouer avec le code.</p><div class=image id=image-476-9><img alt=Méthode class="alignnone size-full paysage" decoding=async height=988 loading=lazy sizes="(max-width: 1600px) 100vw, 1600px" src=/images_tc/2023/10/stat09.png srcset="/images_tc/2023/10/stat09.png 1600w, /images_tc/2023/10/stat09.png 1024w, /images_tc/2023/10/stat09.png 250w" width=2036><div class=legend>Méthode</div></div><div class="sharebas pageGutter"><div class=sharemain><div class=share><div class=crunchify-social><a class="icon_com icon" href=/mail/ target=_blank title="Envoyer un commentaire"></a><a class="icon_mail icon" href="mailto:?subject=Asphalte%2C+gravier+ou+terre%C2%A0%3F&body=Regarde: 2023/10/29/asphalte-gravier-ou-terre/" title="Partager par mail"></a><a class="icon_share icon" href=javascript:void(0); onclick=copyText() title=Partager></a></div></div></div></div></div><div class=load-more-url next-url=/2023/10/23/enrichir-automatiquement-vos-itineraires-avec-des-points-dinteret/ style="display: none;"></div></article><form id=mailchimp class=pageGutter><div id=thema><label class=checkbox for=mc-blog><input checked=1 type=checkbox value=1 name=mc-blog id=mc-blog>Blog</label><label class=checkbox for=mc-carnet><input checked=1 type=checkbox value=2 name=mc-carnet id=mc-carnet>Carnets</label><label class=checkbox for=mc-ecriture><input checked=1 type=checkbox value=3 name=mc-ecriture id=mc-ecriture>Écriture</label><label class=checkbox for=mc-bike><input checked=1 type=checkbox value=4 name=mc-bike id=mc-bike>Vélo</label><label class=checkbox for=mc-daylog><input checked=1 type=checkbox value=1 name=mc-daylog id=mc-daylog>Genlog</label></div><div aria-hidden=true style="position: absolute; left: -5000px;"><input type=text name=b_4346e7140965015f0594fffcd_f8567ebe86 tabindex=-1 value><input type=text name=b_b7e4cf04c803fc0f26b2fff20_4580f38547 tabindex=-1 value></div><input aria-label="Votre email" type=email name=mc-email id=mc-email onblur="if (this.value==\'\') this.value=\'Ton mail\'" value="Ton mail" onfocus="if (this.value==\'Ton mail\') this.value=\'\'"><input type=hidden value=blog-crouzet name=feed_id><input type=submit name=subscribe value=Abonne-toi alt=Abonne-toi title=Abonne-toi><div id=mc-message></div></form></div><a href=/2023/10/23/enrichir-automatiquement-vos-itineraires-avec-des-points-dinteret/ ><div next-url=/2023/10/23/enrichir-automatiquement-vos-itineraires-avec-des-points-dinteret/ id=loadMore></div></a><script type=text/javascript src="/toggle.js?ver=2" id=toggle-js></script><div id=copyMessage></div></body></html>